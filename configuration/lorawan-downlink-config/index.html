<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-configuration/lorawan-downlink-config" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">LoRaWAN Downlink Config | Lobaro Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lobaro.github.io/iot/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lobaro.github.io/iot/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lobaro.github.io/iot/configuration/lorawan-downlink-config"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="LoRaWAN Downlink Config | Lobaro Documentation"><meta data-rh="true" name="description" content="This article describes the technical details how to remotely configure Lobaro devices that are using LoRaWAN as"><meta data-rh="true" property="og:description" content="This article describes the technical details how to remotely configure Lobaro devices that are using LoRaWAN as"><link data-rh="true" rel="icon" href="/iot/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lobaro.github.io/iot/configuration/lorawan-downlink-config"><link data-rh="true" rel="alternate" href="https://lobaro.github.io/iot/configuration/lorawan-downlink-config" hreflang="en"><link data-rh="true" rel="alternate" href="https://lobaro.github.io/iot/configuration/lorawan-downlink-config" hreflang="x-default"><link rel="stylesheet" href="/iot/assets/css/styles.93d2bcca.css">
<script src="/iot/assets/js/runtime~main.bd21e3ec.js" defer="defer"></script>
<script src="/iot/assets/js/main.66cd7dcb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/iot/"><div class="navbar__logo"><img src="/iot/img/logo.svg" alt="Lobaro GmbH - Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" width="115px"><img src="/iot/img/logoDark.svg" alt="Lobaro GmbH - Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" width="115px"></div><b class="navbar__title text--truncate">docs</b></a><a class="navbar__item navbar__link" href="/iot/products/">Products</a><a class="navbar__item navbar__link" href="/iot/components/">Components</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/iot/configuration/">Configuration</a><a class="navbar__item navbar__link" href="/iot/platform/">Lobaro IoT Platform</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item"><button onclick="history.back()">Go Back</button></div><div class="navbar__item"><button onclick="history.forward()">Go Forward</button></div><a class="navbar__item navbar__link" href="/iot/knowledge-base/wireless-mbus">Knowledge Base</a><a href="https://www.lobaro.de" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Lobaro Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/iot/configuration/">Configuration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/iot/configuration/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/iot/configuration/usb-config-adapter">Lobaro USB Config Adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/iot/configuration/lobaro-config-tool">Lobaro Config Tool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/iot/configuration/meter-reception-filter-config">MBUS Reception Filtering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/iot/configuration/lorawan-downlink-config">LoRaWAN Downlink Config</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/iot/configuration/cron-configuration">CRON Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/iot/configuration/lte-network-configuration">LTE Network Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/iot/configuration/obis-code-configuration">OBIS-Code Configuration</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/iot/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Configuration</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">LoRaWAN Downlink Config</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>LoRaWAN Downlink Config</h1>
<p>This article describes the technical details how to remotely configure Lobaro devices that are using <strong>LoRaWAN</strong> as
upload technology.</p>
<p>IoT devices are often installed at places that are difficult to reach. If you need to change the settings of such a
device it is often not easily possible to get physical access to attach a config adapter.</p>
<p>Many of our devices support LoRaWAN remote configuration that allows you to change the configuration of the device by
sending downlink messages.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you are using cellular IoT (NB-IoT, LTE-M) as communication technology any configuration updates are done in a
different way.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="protocol-description">Protocol Description<a class="hash-link" aria-label="Direct link to Protocol Description" title="Direct link to Protocol Description" href="/iot/configuration/lorawan-downlink-config#protocol-description">​</a></h2>
<p>Lobaro LoRaWAN devices receive remote configuration commands as Downlinks on port 128. Responses to those commands will
be sent as Uplinks on <code>Port 128</code> (and 129-131 for long responses). <strong>The remote commands and their responses are all
encoded in ASCII</strong>, to make it easier for humans to use them. The ASCII string must be converted to hex or Base64
payload bytes, depending on the used LoRaWAN network server.</p>
<p>The first byte of a Downlink message on <code>Port 128</code> contains a single character that identifies the command you want to
send. Some commands take a parameter following the command char.</p>
<p>The responses to a command start with the same character as the command followed by an optional parameter. If a command
is unknown, or it fails for some reason, an error response is sent via Uplink that contains with a ! followed by a
readable error message.</p>
<p>Changing configuration does nothing until you save the changes and reboot the device. The device has a safety feature
that prevents configurations that make the device unusable. A new configuration is tested in the first run after
rebooting. Only after the device reaches a stable state will the configuration be adopted and used permanently. If a
problem occurs the device will restore its last stable connection and reboot. If the device uses OTAA (which we
recommend) the device will only adopt the new configuration only after a join request is accepted, to make sure the
LoRaWAN parameters are correct. After a few failed attempts it will restore the previous configuration. This can take up
to about 10 minutes.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Downlinks should only be used to a limited extent depending on the infrastructure. In the free version of TTN, the Fair
use policy says, that no more than 10 downlinks should be made. You also have to observe the regulations within the
Limit of the duty cycle limitation. That is why downlinks are only to be carried out with caution and when absolutely
necessary. The number of possible characters that can be sent is limited by the respective spreading factor (With a SF
of 12 only 51 characters).</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="downlink-commands-port-128">Downlink Commands (Port 128)<a class="hash-link" aria-label="Direct link to Downlink Commands (Port 128)" title="Direct link to Downlink Commands (Port 128)" href="/iot/configuration/lorawan-downlink-config#downlink-commands-port-128">​</a></h3>
<p>Configurations are normally communicated as downlinks and uplinks (responses) on <code>Port 128</code>. For longer responses, that
don&#x27;t can be send as single uplink on <code>Port 128</code>, the <code>Ports 129-131</code> are used. The first response part is sent
on <code>Port 129</code>, the middle parts (if exist) on <code>Port 130</code> and the last part on <code>Port 131</code>. A stateful parser can
concatenate long responses based on Port and FCnt.</p>
<table><thead><tr><th>Char</th><th>Command</th><th>Parameter</th><th>HEX</th><th>Info</th></tr></thead><tbody><tr><td>?</td><td>Request firmware and version</td><td><code>None             </code></td><td>3F</td><td></td></tr><tr><td>a</td><td>Append to config parameter val</td><td><code>&lt;name&gt;=&lt;value&gt;   </code></td><td>61</td><td></td></tr><tr><td>b</td><td>Reboot device without saving</td><td><code>None             </code></td><td>62</td><td></td></tr><tr><td>g</td><td>Get config parameter value</td><td><code>Name of parameter</code></td><td>67</td><td></td></tr><tr><td>r</td><td>Reset config parameter value</td><td><code>Name of parameter</code></td><td>72</td><td></td></tr><tr><td>s</td><td>Set config parameter value</td><td><code>&lt;name&gt;=&lt;value&gt;   </code></td><td>73</td><td></td></tr><tr><td>S</td><td>Set config parameter value &amp; Save and reboot</td><td><code>&lt;name&gt;=&lt;value&gt;   </code></td><td>53</td><td>Not supported on all devices</td></tr><tr><td>w</td><td>Save config and reboot device</td><td><code>None             </code></td><td>77</td><td></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Depending on the firmware version not all commands might be supported on all devices.
Please refer to the manual of your product for more details.</p></div></div>
<h4><code>?</code></h4>
<p>Request firmware and version. This command triggers the device to send what firmware it is running and in which version.
This can be used to test if the remote configuration is working.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gname"><code>g&lt;name&gt;</code><a class="hash-link" aria-label="Direct link to gname" title="Direct link to gname" href="/iot/configuration/lorawan-downlink-config#gname">​</a></h4>
<p>Get the value of the config parameter <code>&lt;name&gt;</code>. This command makes the device sent a response
containing <code>&lt;name&gt;=&lt;value&gt;</code> as
parameter giving you the current value of a configuration parameter.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rname--r"><code>r&lt;name&gt; / r*</code><a class="hash-link" aria-label="Direct link to rname--r" title="Direct link to rname--r" href="/iot/configuration/lorawan-downlink-config#rname--r">​</a></h4>
<p>Reset config parameter <code>&lt;name&gt;</code> to its default value. As a confirmation the device sends a response
containing <code>&lt;name&gt;=&lt;value&gt;</code>, reporting the new value of the parameter.Sending the special value * will reset all config
parameters.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="snamevalue"><code>s&lt;name&gt;=&lt;value&gt;</code><a class="hash-link" aria-label="Direct link to snamevalue" title="Direct link to snamevalue" href="/iot/configuration/lorawan-downlink-config#snamevalue">​</a></h4>
<p>Set config parameter <code>&lt;name&gt;</code> to <code>&lt;value&gt;</code>. Sets the parameter to the value given in the parameter. As a confirmation it
sends a response containing <code>&lt;name&gt;=&lt;value&gt;</code>, reporting the new value of the parameter.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="anamevalue"><code>a&lt;name&gt;=&lt;value&gt;</code><a class="hash-link" aria-label="Direct link to anamevalue" title="Direct link to anamevalue" href="/iot/configuration/lorawan-downlink-config#anamevalue">​</a></h4>
<p>Append <code>&lt;value&gt;</code> to the config parameter <code>&lt;name&gt;</code>. This command appends the value given to the current value of the
parameter. This is intended to allow setting values that are too long for a single Downlink message. As a confirmation
it sends the length of the config parameter&#x27;s value after the appending. Append works for config parameters of type
string.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="b"><code>b</code><a class="hash-link" aria-label="Direct link to b" title="Direct link to b" href="/iot/configuration/lorawan-downlink-config#b">​</a></h4>
<p>Reboot device without saving. This command restarts the device. Any changes too the config that have been committed
before will be lost! This command does not send a Response.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="w-or-wforce"><code>w or wFORCE</code><a class="hash-link" aria-label="Direct link to w-or-wforce" title="Direct link to w-or-wforce" href="/iot/configuration/lorawan-downlink-config#w-or-wforce">​</a></h4>
<p>Save config and reboot device. This command saves all configuration changes to a temporarily configuration and restarts
the device. Only if the device boots successfully and reaches normal operation mode is the new configuration made
permanent. If any fatal configuration error occurs or if the LoRaWAN OTAA Join does not succeed, the previous
configuration will be restored and the device restarted again. This command does not send a Response.If you add the
special argument FORCE to the command, the configuration will be made permanent without testing the configuration.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Using <strong>wFORCE</strong> can leave your device useless and unreachable!</p><p>Do not use <strong>wFORCE</strong> unless you have a very good reason. If the device is set to an invalid configuration it will no
longer
be reachable by the Network Server. From such a state it can only be recovered with physical access and a config
adapter. It will also most likely drain the battery quickly.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>For commands <code>s</code>, <code>S</code> and <code>a</code> make sure the number of characters to send matches with the possibilities your devices
spreading factor:</p><ul>
<li>SF 7 = 242 bytes max. LoRaWAN downlink payload</li>
<li>SF 12 = 51 bytes max. LoRaWAN downlink payload</li>
</ul><p>Consider splitting bigger configuration changed in multiple smaller downlinks.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples" href="/iot/configuration/lorawan-downlink-config#examples">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="changing-device-configuration">Changing device configuration<a class="hash-link" aria-label="Direct link to Changing device configuration" title="Direct link to Changing device configuration" href="/iot/configuration/lorawan-downlink-config#changing-device-configuration">​</a></h3>
<p>The following is a short example of how you can update two configuration values remotely (that includes rebooting the
device).</p>
<p>Most LoRaWAN devices (all that are running in Class A, which are by fast the most) can only be reached when they contact
the network. Network Servers (like The Things Network) provide a mechanism to enqueue messages for a specific device.
The messages will be sent as downlink the next time that device contacts the network. Normally, multiple messages can be
enqueued and will all be transmitted as soon as possible. Please be advised that the gateways communicating with your
device must respect their duty cycle, so there is a very limited amount of downlinks that can be sent for a given time (
downlinks are expensive).</p>
<p>For this example we want to set Time Synchronization to sync the internal clock every 10 days, and we want to deactivate
Adaptive Date Rate (ADR). These are both LoRaWAN configuration parameters that are present on most devices (find details
under LoRaWAN Configuration), but you can of course also change parameters specific to your device, e.g. Modbus
configuration or wMBus configuration, with this feature.</p>
<p>We will need to send three commands:</p>
<ul>
<li><strong>s</strong>TimeSync=10<!-- -->
<ul>
<li>set time synchronization to 10 day interval</li>
</ul>
</li>
<li><strong>s</strong>ADR=false<!-- -->
<ul>
<li>disable adaptive data rate</li>
</ul>
</li>
<li><strong>w</strong>
<ul>
<li>write changes to device configuration and reboot</li>
</ul>
</li>
</ul>
<p>The actual s-commands will of course differ for your case, but the w command at the end <strong>must</strong> always be the same.</p>
<p>After sending the final command, the device will reboot and try the new configuration. If the boot process and the
connection to the network are successful, the device will make the changes permanent. If there is a problem (if you
accidentally set an invalid value, e.g. sADR=flase or if you changed your AppKey to wrong value and your OTAA fails),
the device will revert to the previous configuration.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="downlink-on-ttn">Downlink on TTN<a class="hash-link" aria-label="Direct link to Downlink on TTN" title="Direct link to Downlink on TTN" href="/iot/configuration/lorawan-downlink-config#downlink-on-ttn">​</a></h4>
<p>How you sent your downlinks depends on the LoRaWAN Network Server you use to connect your devices. You will most likely
need to convert the commands (that are all ASCII) to some different representation, e.g. Hex or Base64.</p>
<p>In The Things Network you find the downlink panel on the &quot;Device Overview&quot; page for each device, directly below the
panel that shows you OTAA/ABP information (DevEUI, AppKey, ...). It is shown in the following screenshot.</p>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAS0lEQVR4nEXLUQqAMAwD0N3/lB5AUBHWpNsaaUEtPPKRtO3nJZCKiDLnFEmttT7urtZ7ryIHY4zK9F4+O6kGUAbIzAoMAn7ZbfehB1MfdZx0etnTAAAAAElFTkSuQmCC&quot;);width:60%;padding-top:5px;padding-bottom:5px"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1081" height="370"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/iot/assets/images/ideal-img/ttn-downlink.307b73d.1081.png" srcset="/iot/assets/images/ideal-img/ttn-downlink.307b73d.1081.png 1081w" alt="TTN LoRaWAN downlink configuration" width="1081" height="370"></noscript></div>
<p>You will have to encode the commands in hex. In the screenshot you see <code>73 54 69 6d 65 53 79 6e 63 3d 31 30</code> as the
message to send; that is the hex representation of <code>sTimeSync=10</code>. The Port used for remote configuration for our
devices
is 128. When you enter multiple messages to send, be sure to set the correct scheduling (last). The preselected replace
will overwrite your previously enqueued messages.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getting-the-firmware-version">Getting the firmware version<a class="hash-link" aria-label="Direct link to Getting the firmware version" title="Direct link to Getting the firmware version" href="/iot/configuration/lorawan-downlink-config#getting-the-firmware-version">​</a></h3>
<p>For this example the &quot;Request firmware and version&quot; <code>?</code> (0x3F) command has to used. We use TTN as network server.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="downlink-on-ttn-1">Downlink on TTN<a class="hash-link" aria-label="Direct link to Downlink on TTN" title="Direct link to Downlink on TTN" href="/iot/configuration/lorawan-downlink-config#downlink-on-ttn-1">​</a></h4>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAIAAAC+zks0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAcUlEQVR4nG2MMQ7CMBAE/f9v0fAMilAgpAT7Ysu+27tFcYEAZTTdSJNIam35du8vcQYAdwcQESSTmW7PteXKM5KaSd1V1d1P8iili9h8xuQnN9nrfpwj/p3znEcTNfQBA789ctna9bI8ljUCZgrYR5JvSz7Nn8r84TIAAAAASUVORK5CYII=&quot;);width:50%;padding-top:5px;padding-bottom:5px"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="882" height="660"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/iot/assets/images/ideal-img/Downlink-TTN-get-fw.b7f06e1.882.png" srcset="/iot/assets/images/ideal-img/Downlink-TTN-get-fw.b7f06e1.882.png 882w" alt="TTN LoRaWAN downlink get firmware version" width="882" height="660"></noscript></div>
<p>Will result in:</p>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAIAAABol6gpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAHklEQVR4nGP4+vXrly9fPsPAz58/ISLfvn379OkTALwKHKViCz9TAAAAAElFTkSuQmCC&quot;);width:50%;padding-top:5px;padding-bottom:5px"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="634" height="45"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/iot/assets/images/ideal-img/lorawan-downlink-3F-downlink.80f3eb1.634.png" srcset="/iot/assets/images/ideal-img/lorawan-downlink-3F-downlink.80f3eb1.634.png 634w" alt="TTN LoRaWAN downlink get firmware version" width="634" height="45"></noscript></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="uplink-on-ttn">Uplink on TTN<a class="hash-link" aria-label="Direct link to Uplink on TTN" title="Direct link to Uplink on TTN" href="/iot/configuration/lorawan-downlink-config#uplink-on-ttn">​</a></h4>
<p>The device answers with this uplink:</p>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAIAAABol6gpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAKklEQVR4nAEfAOD/APLy8vDw8Pb29vLx8fH09O3Z2ea3t/Du7vHy8vPz86+eG6M4AoFrAAAAAElFTkSuQmCC&quot;);width:95%;padding-top:5px;padding-bottom:5px"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1378" height="31"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/iot/assets/images/ideal-img/lorawan-downlink-3F-answer.4bc9c29.1378.png" srcset="/iot/assets/images/ideal-img/lorawan-downlink-3F-answer.4bc9c29.1378.png 1378w" alt="TTN LoRaWAN uplink get firmware version" width="1378" height="31"></noscript></div>
<p>This response can be converted to ASCII again, e.g. using
any <a href="https://www.rapidtables.com/convert/number/hex-to-ascii.html" target="_blank" rel="noopener noreferrer">online converter</a>:</p>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAACUFjqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABDUlEQVR4nCXOzU/CMBiA8f7/B4/eTSQSNHLQSDwoJhrR3fTAh4DuA9aObv0eHeu71qDJL8/5QUIqIRQXSiptdK20aZqDc9C2znuPKEkYzRhNJcNaEC2I4ljyXHJca4rI9qvAsWS5NdRILKrUGmrNztalYgkaj0fnF73BVX81j1S5YGTKixkvjmXFFJHtIksWaTwn2zUv04omvMok24gqE+UPsjUH8G3rjjsOALoQQvA+hNBYgWpTAjhwhw7aDlzX/Wu972zNkKHJge+sxtBQsHSvsJH5HyyrGN1/3vSi3kv0FL29TibPRb7cq43miRGZLNfo9vHsdHhyN+w/DK9Hl4PVx3tF4wKvd+SbkuUv4kcPHFiK110AAAAASUVORK5CYII=&quot;);width:30%;padding-top:5px;padding-bottom:5px"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="619" height="648"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/iot/assets/images/ideal-img/3F-result-in-ascii.c89288d.619.png" srcset="/iot/assets/images/ideal-img/3F-result-in-ascii.c89288d.619.png 619w" alt="TTN LoRaWAN uplink to ascii conversion get firmware version" width="619" height="648"></noscript></div>
<p>The result is: <code>?app-hybrid-modbus v0.4.0+battery</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-a-device-via-script">Configure a device via script<a class="hash-link" aria-label="Direct link to Configure a device via script" title="Direct link to Configure a device via script" href="/iot/configuration/lorawan-downlink-config#configure-a-device-via-script">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-configuration-command-to-be-send">Example configuration command to be send<a class="hash-link" aria-label="Direct link to Example configuration command to be send" title="Direct link to Example configuration command to be send" href="/iot/configuration/lorawan-downlink-config#example-configuration-command-to-be-send">​</a></h4>
<p>Example command (ASCII encoding):<br>
<code>SMbCmd=0 0/10 * * * *:R,9600,8N1:010300160002,010300260002,fa0400050001</code></p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>For commands <code>s</code>, <code>S</code> and <code>a</code> make sure the number of characters to send matches with the possibilities your devices
spreading factor:</p><ul>
<li>SF 7 = 242 bytes max. LoRaWAN downlink payload</li>
<li>SF 12 = 51 bytes max. LoRaWAN downlink payload</li>
</ul><p>Consider splitting bigger configuration changed in multiple smaller downlinks.</p></div></div>
<p>Example command (Base64 encoding):<br>
<code>U01iQ21kPTAgMC8xMCAqICogKiAqOlIsOTYwMCw4TjE6MDEwMzAwMTYwMDAyLDAxMDMwMDI2MDAwMixmYTA0MDAwNTAwMDE=</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="curl-script-for-ttn">Curl Script for TTN<a class="hash-link" aria-label="Direct link to Curl Script for TTN" title="Direct link to Curl Script for TTN" href="/iot/configuration/lorawan-downlink-config#curl-script-for-ttn">​</a></h4>
<p>Curl script to be used with TTN:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--location</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Authorization: Bearer NNSXS.XJAZK3VF3YBMXX_API_KEY_KR2HFG6ABXXXXXX.CP4WZUOXXXXXXXB5WW4UUSMNXRLUJ7LVO2U&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Content-Type: application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;User-Agent: my-integration/my-integration-version&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--request</span><span class="token plain"> POST </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--data</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;downlinks&quot;:[{ &quot;frm_payload&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;U01iQ21kPTAgMC8xMCAqICogKiAqOlIsOTYwMCw4TjE6MDEwMzAwMTYwMDAyLDAxMDMwMDI2MDAwMixmYTA0MDAwNTAwMDE=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;f_port&quot;:128 }] }&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;https://eu1.cloud.thethings.network/api/v3/as/applications/your-ttn-applicationID/devices/eui-your_TTN_end_deviceID/down/push&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See also:  <a href="https://www.thethingsindustries.com/docs/integrations/webhooks/scheduling-downlinks/" target="_blank" rel="noopener noreferrer">https://www.thethingsindustries.com/docs/integrations/webhooks/scheduling-downlinks/</a></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You should use your own data for the API KEY, your-ttn-applicationID and your your_TTN_end_deviceID</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="chirpstack-v3">Chirpstack V3<a class="hash-link" aria-label="Direct link to Chirpstack V3" title="Direct link to Chirpstack V3" href="/iot/configuration/lorawan-downlink-config#chirpstack-v3">​</a></h4>
<p>Curl script to be used with Chirpstack V3:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-X</span><span class="token plain"> POST </span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Content-Type: application/json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Accept: application/json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Grpc-Metadata-Authorization:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Bearer xxxxxxxxx_API_KEY_xxxxxxx&#x27;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;{ &quot;deviceQueueItem&quot;: { &quot;confirmed&quot;: false, &quot;data&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;U01iQ21kPTAgMC8xMCAqICogKiAqOlIsOTYwMCw4TjE6MDEwMzAwMTYwMDAyLDAxMDMwMDI2MDAwMixmYTA0MDAwNTAwMDE=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;fPort&quot;: 128</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> } }&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;http://192.198.0.101:8080/api/devices/ChirpStack_DevEUI/queue&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You should use your own data for the API KEY, your Chirpstack_IP_Adress and your your_ChirpStack_DevEUI</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="chirpstack-v4">Chirpstack V4<a class="hash-link" aria-label="Direct link to Chirpstack V4" title="Direct link to Chirpstack V4" href="/iot/configuration/lorawan-downlink-config#chirpstack-v4">​</a></h4>
<p>The actual API has now switched from the Swagger API with UI to gRPC integration, but for compatibility and transition
reasons the chirpstack-rest-api can be installed as an additional component. However, experience has shown that there
are changes that need to be considered. &quot;deviceQueueItem&quot; became &quot;&quot;queueItem&quot; and by default the API can now be reached
on port 8090 and no longer 8080.</p>
<p>Curl script to be used with Chirpstack V4:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-X</span><span class="token plain"> POST </span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Content-Type: application/json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Accept: application/json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--header</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Grpc-Metadata-Authorization:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Bearer xxxxxxxxx_API_KEY_xxxxxxx&#x27;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;{ &quot;queueItem&quot;: { &quot;confirmed&quot;: false, &quot;data&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;U01iQ21kPTAgMC8xMCAqICogKiAqOlIsOTYwMCw4TjE6MDEwMzAwMTYwMDAyLDAxMDMwMDI2MDAwMixmYTA0MDAwNTAwMDE=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&quot;fPort&quot;: 128</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> } }&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;http://192.198.0.101:8090/api/devices/ChirpStack_DevEUI/queue&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/lobaro/iot/tree/master/docs/configuration/lorawan-downlink-config.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/iot/configuration/meter-reception-filter-config"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">MBUS Reception Filtering</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/iot/configuration/cron-configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CRON Configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/iot/configuration/lorawan-downlink-config#protocol-description">Protocol Description</a><ul><li><a class="table-of-contents__link toc-highlight" href="/iot/configuration/lorawan-downlink-config#downlink-commands-port-128">Downlink Commands (Port 128)</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/iot/configuration/lorawan-downlink-config#examples">Examples</a><ul><li><a class="table-of-contents__link toc-highlight" href="/iot/configuration/lorawan-downlink-config#changing-device-configuration">Changing device configuration</a></li><li><a class="table-of-contents__link toc-highlight" href="/iot/configuration/lorawan-downlink-config#getting-the-firmware-version">Getting the firmware version</a></li><li><a class="table-of-contents__link toc-highlight" href="/iot/configuration/lorawan-downlink-config#configure-a-device-via-script">Configure a device via script</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><div style="font-size: small">Copyright © <a href="https://www.lobaro.de" target="_blank">Lobaro GmbH</a> 2024 | Stadtdeich 7 | D-20097 Hamburg | Germany | <a href="mailto:support@lobaro.de">support@lobaro.de</a> | <a href="https://www.lobaro.com/en/contact/" target="_blank">Legal Disclosure</a></div></div></div></div></footer></div>
</body>
</html>